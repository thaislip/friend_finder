<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel ="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script> 
    <title>Friend Finder</title>   
</head>
<body>
        <div class ="container-fluid">
                <div class="jumbotron">
                    <h1 id= "header">Survey Questions</h1>
                </div>
                    <hr>
                    <h2>About You</h2>
                    <h3>Name (Required)</h3>
                    <input type="text" name="" id="name">
                    <h3>Link to Photo Image (Required)</h3>
                    <input type="text" name="" id="photo">
                    <hr>
            
                    <div>
                        <h3><strong>Question 1</strong></h3>
                        <h4>Would you consider MilkSteak your favorite food?</h4>
                          <select data-placeholder="Choose a response" id="1" style="width:350px">
                                <option value=""></option>
                                <option value="1">1 (not much)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (very much)</option>
                          </select>
                    </div>
                    <div>
                        <h3><strong>Question 2</strong></h3>
                        <h4>Do you get nauseous in certain social situations?</h4>
                          <select data-placeholder="Choose a response" id="2" style="width:350px">
                                <option value=""></option>
                                <option value="1">1 (not much)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (very much)</option>
                          </select>
                    </div>
                    <div>
                        <h3><strong>Question 3</strong></h3>
                        <h4>Do you like Philadelphia?</h4>
                          <select data-placeholder="Choose a response" id="3" style="width:350px">
                                <option value=""></option>
                                <option value="1">1 (not much)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (very much)</option>
                          </select>
                    </div>
                    <div>
                        <h3><strong>Question 4</strong></h3>
                        <h4>Would you still love your father if he was plotting to kill you in prison?</h4>
                          <select data-placeholder="Choose a response" id="4" style="width:350px">
                                <option value=""></option>
                                <option value="1">1 (not much)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (very much)</option>
                          </select>
                    </div>
                    <div>
                        <h3><strong>Question 5</strong></h3>
                        <h4>Do you like the Philly Fanatic?</h4>
                          <select data-placeholder="Choose a response" id="5" style="width:350px">
                                <option value=""></option>
                                <option value="1">1 (not much)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (very much)</option>
                          </select>
                    </div>
                    <div>
                        <h3><strong>Question 6</strong></h3>
                        <h4>Do you like Maurine Ponderosa?</h4>
                          <select data-placeholder="Choose a response" id="6" style="width:350px">
                                <option value=""></option>
                                <option value="1">1 (not much)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (very much)</option>
                          </select>
                    </div>
                    <div>
                        <h3><strong>Question 7</strong></h3>
                        <h4>Are you good at flip cup under pressure?</h4>
                          <select data-placeholder="Choose a response" id="7" style="width:350px">
                                <option value=""></option>
                                <option value="1">1 (not much)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (very much)</option>
                          </select>
                    </div>
                    <div>
                        <h3><strong>Question 8</strong></h3>
                        <h4>Do you like acting and theater?</h4>
                          <select data-placeholder="Choose a response" id="8" style="width:350px">
                                <option value=""></option>
                                <option value="1">1 (not much)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (very much)</option>
                          </select>
                    </div>
                    <div>
                        <h3><strong>Question 9</strong></h3>
                        <h4>Do you see yourself as a God amongst men?</h4>
                          <select data-placeholder="Choose a response" id="9" style="width:350px">
                                <option value=""></option>
                                <option value="1">1 (not much)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (very much)</option>
                          </select>
                    </div>
                    <div>
                        <h3><strong>Question 10</strong></h3>
                        <h4>Do you feel like most places should have a more relaxed Spaghetti policy?</h4>
                          <select data-placeholder="Choose a response" id="10" style="width:350px">
                                <option value=""></option>
                                <option value="1">1 (not much)</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5 (very much)</option>
                          </select>
            
                    </div><hr>
            
                        <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit">Submit</button>
            
                    <br><hr>
                    <footer class="footer">
                        <div class="container">
                            <p><a target = "_blank" href="/api/friends">API Friends List</a> | <a target = "_blank" href="https://thaislip.github.io/friend_finder/">Github Link</a></p>
                        </div>
                    </footer>
            
                </div>

                <div id = "resultsModal" class = "modal fade" role="dialog">
                      <div class = "mnodal-dialog">
                            <div class ="modal-content">
                                  <div class = "modal-header">
                                        <button type = "button" class = "close" data-dismiss = "modal">
                                              &times;
                                        </button>
                                        <h2 class = "modal-title"><strong>Best Match</strong></h2>
                                  </div>

                        <div class = "modal-body">
                              <h2 id = "matchName"></h2>
                              <img
                              id="matchImg"
                              src="https://via.placeholder.com/400x400"
                              alt="placeholder image"
                              />
                        </div>

                        <div class = "modal-footer">
                              <button type = "button" class = "btn btn-default" data-dismiss = "modal">
                                    close
                              </button>
                        </div>
                            </div>
                      </div>
                </div>

                <script type = "text/javascript">
                $("#submit").on("click", function(){
                      function validateForm(){
                            var isValid = true;
                            $(".form-control").each(function(){
                                  if($(this).val() === "") isValid = false;
                            });
                            $(".chosen-select").each(function(){
                                  if($(this).val() === "") isValid = false;
                            });
                            return isValid;
                      }
                      if(validateForm() == true) {
                            var userData = {
                                  name: $("#name").val(),
                                  photo: $("#photo").val(),
                                  scores: [
                                    $("q1").val(),
                                    $("q2").val(),
                                    $("q3").val(),
                                    $("q4").val(),
                                    $("q5").val(),
                                    $("q6").val(),
                                    $("q7").val(),
                                    $("q8").val(),
                                    $("q9").val(),
                                    $("q10").val(),
                                  ]
                            };
                            var currentURL = window.location.origin;

                            $.post(currentURL + "/api/friends", userData, function(data){
                                  $("matchName").text(data.name);
                                  $("#matchImg").attr("src", data.photo);
                                  $("#resultsModal").modal("toggle");
                            });
                        }else{
                              alert("Please fill out all fields before submitting!");
                        }
                        return false;
                      
                });
                </script>
</body>
</html>